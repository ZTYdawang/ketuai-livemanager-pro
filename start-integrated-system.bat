@echo off
chcp 65001 >nul
echo.
echo ================================================================
echo               Ketu Live Score é›†æˆç³»ç»Ÿå¯åŠ¨å™¨
echo                ç›´æ’­é—´ç®¡ç† + æ™ºèƒ½çˆ¬è™«ç›‘æŽ§ç³»ç»Ÿ
echo ================================================================
echo.

:: æ£€æŸ¥Node.jsçŽ¯å¢ƒ
node --version >nul 2>&1
if errorlevel 1 (
    echo âŒ æœªæ£€æµ‹åˆ°Node.jsçŽ¯å¢ƒï¼Œè¯·å…ˆå®‰è£…Node.js
    pause
    exit /b 1
)

echo âœ… Node.jsçŽ¯å¢ƒæ£€æŸ¥é€šè¿‡

:: æ£€æŸ¥npmçŽ¯å¢ƒ
npm --version >nul 2>&1
if errorlevel 1 (
    echo âŒ æœªæ£€æµ‹åˆ°npmçŽ¯å¢ƒ
    pause
    exit /b 1
)

echo âœ… npmçŽ¯å¢ƒæ£€æŸ¥é€šè¿‡
echo.

:: å¯åŠ¨åŽç«¯æœåŠ¡
echo ðŸš€ æ­£åœ¨å¯åŠ¨åŽç«¯æœåŠ¡...
echo.
start "åŽç«¯æœåŠ¡ - Ketu Live Score Backend" cmd /k "cd /d backend && echo ðŸ”§ å®‰è£…åŽç«¯ä¾èµ–... && npm install && echo ðŸš€ å¯åŠ¨åŽç«¯æœåŠ¡... && npm run dev"

:: ç­‰å¾…å‡ ç§’è®©åŽç«¯å¯åŠ¨
timeout /t 5 /nobreak >nul

:: å¯åŠ¨å‰ç«¯æœåŠ¡
echo ðŸŽ¨ æ­£åœ¨å¯åŠ¨å‰ç«¯æœåŠ¡...
echo.
start "å‰ç«¯æœåŠ¡ - Ketu Live Score Frontend" cmd /k "cd /d frontend && echo ðŸ”§ å®‰è£…å‰ç«¯ä¾èµ–... && npm install && echo ðŸš€ å¯åŠ¨å‰ç«¯æœåŠ¡... && npm run dev"

echo.
echo ================================================================
echo                      ðŸŽ‰ ç³»ç»Ÿå¯åŠ¨å®Œæˆï¼
echo ================================================================
echo.
echo ðŸ“± å‰ç«¯è®¿é—®åœ°å€: http://localhost:5173 (æˆ–æ˜¾ç¤ºçš„å…¶ä»–ç«¯å£)
echo ðŸ”§ åŽç«¯APIåœ°å€:  http://localhost:5555
echo ðŸ” ç›‘æŽ§APIæ–‡æ¡£:  http://localhost:5555/api/live-monitor/status
echo.
echo ðŸ”‘ é»˜è®¤æµ‹è¯•è´¦æˆ·:
echo    é‚®ç®±: admin@163.com
echo    å¯†ç : password
echo.
echo ðŸ’¡ åŠŸèƒ½ç‰¹æ€§:
echo    âœ… ç›´æ’­é—´æ‰¹é‡ç®¡ç†
echo    âœ… æ™ºèƒ½çˆ¬è™«ç›‘æŽ§ (V6æœ€ç»ˆç‰ˆ)
echo    âœ… å®žæ—¶WebSocketè¿žæŽ¥
echo    âœ… å¤šå¹³å°æ”¯æŒ (æŠ–éŸ³ã€å¿«æ‰‹ã€Bç«™ç­‰)
echo    âœ… æ™ºèƒ½æ•°æ®çœ‹æ¿
echo    âœ… è‡ªåŠ¨åŒ–çŠ¶æ€ç›‘æŽ§
echo.
echo ðŸ“– ä½¿ç”¨è¯´æ˜Ž:
echo    1. åœ¨ç›´æ’­é—´ç®¡ç†é¡µé¢æ‰¹é‡å¯¼å…¥ç›´æ’­é—´URL
echo    2. ç³»ç»Ÿä¼šè‡ªåŠ¨èŽ·å–æ ‡é¢˜å’Œæ£€æµ‹çŠ¶æ€
echo    3. å¯¹æŠ–éŸ³ç›´æ’­é—´å¯å¯åŠ¨å®žæ—¶WebSocketç›‘æŽ§
echo    4. åœ¨æ™ºèƒ½çœ‹æ¿æŸ¥çœ‹å®žæ—¶æ•°æ®ç»Ÿè®¡
echo.
echo âš ï¸  æ³¨æ„äº‹é¡¹:
echo    - å®žæ—¶ç›‘æŽ§ç›®å‰ä»…æ”¯æŒæŠ–éŸ³ç›´æ’­é—´
echo    - ç³»ç»Ÿä¼šæ¯5åˆ†é’Ÿè‡ªåŠ¨æ£€æŸ¥ç›´æ’­é—´çŠ¶æ€
echo    - æµè§ˆå™¨éœ€è¦æ”¯æŒçŽ°ä»£Webæ ‡å‡†
echo.
echo æŒ‰ä»»æ„é”®é€€å‡ºå¯åŠ¨å™¨...
pause >nul 